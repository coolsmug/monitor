
<%- include ("../website/include/header.ejs") %> 
    <!--====== PAGE BANNER PART START ======-->
    
    
    <section id="page-banner" class="pt-105 pb-130 bg_cover" data-overlay="8" style="background-image: url('<%= blog.img.url %>')">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="page-banner-cont">
                        <h2><%= blog.headline.split(" ").slice(0, 5).join(" ") %></h2>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Home</a></li>
                                <li class="breadcrumb-item"><a href="/blogs">Blog</a></li>
                                <li class="breadcrumb-item active" aria-current="page"><%= blog.headline.split(" ").slice(0, 5).join(" ") %></li>
                            </ol>
                        </nav>
                    </div>  <!-- page banner cont -->
                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </section>
  
    <!--====== PAGE BANNER PART ENDS ======-->
   
    <!--====== BLOG PART START ======-->
    
    <section id="blog-singel" class="pt-90 pb-120 gray-bg">
        <div class="container">
           <div class="row">
              <div class="col-lg-8">
                  <div class="blog-details mt-30">
                      <div class="thum">
                          <img src="<%= blog.img ? blog.img.url : 'images/blog/b-1.jpg' %>" alt="Blog Details">
                      </div>
                      <div class="cont">
                          <h3><%= blog.headline %></h3>
                          <ul>
                              
                                    <% const dating = blog.createdAt %>
                                    <% const date = new Date(dating)  %>
                                    <% const options = { day: 'numeric', month: 'long', year: 'numeric' }; %>
                               <li><a href="#"><i class="fa fa-calendar"></i><%= date.toLocaleDateString('en-US', options) %></a></li>
                               <li><a href="#"><i class="fa fa-user"></i><%= blog.author %></a></li>
                               <li><a href="#"><i class="fa fa-tags"></i><%= blog.category %></a></li>
                           </ul>
                          <% if (blog && blog.content) { %>
                            <% blog.content.split(/\r?\n/).forEach(p => { %>
                                <% if (p.trim()) { %>
                                <p><%= p %></p>
                                <% } %>
                            <% }) %>
                            <% } %>

                          <ul class="share">
  <li class="title">Share :</li>

  <!-- Facebook -->
  <li>
    <a onclick="shareOnFacebook()" href="https://www.facebook.com/sharer/sharer.php?u=<%= encodeURIComponent(`https://${subdomain}.monitrex.work/single-blog/${blog._id}/${blog.slug}`) %>" 
       target="_blank">
      <i class="fa fa-facebook-f"></i>
    </a>
  </li>

  <!-- Twitter (X) -->
  <li>
    <a onclick="shareOnTwitter()" href="https://twitter.com/intent/tweet?text=<%= encodeURIComponent(blog.headline) %>&url=<%= encodeURIComponent(`https://${subdomain}.monitrex.work/single-blog/${blog._id}/${blog.slug}`) %>" 
   target="_blank">
   <i class="fa fa-twitter"></i>
    </a>

  </li>

  <!-- WhatsApp -->
  <li >
    <a href="https://wa.me/?text=<%= encodeURIComponent(blog.headline + ' ' + `https://${subdomain}.monitrex.work/single-blog/${blog._id}/${blog.slug}`) %>" 
   target="_blank">
   <i class="fa fa-whatsapp"></i>
</a>

  </li>

  <!-- LinkedIn -->
  <li>
    <a onclick="shareOnLinkedIn()" href="https://www.linkedin.com/sharing/share-offsite/?url=<%= encodeURIComponent(`https://${subdomain}.monitrex.work/single-blog/${blog._id}/${blog.slug}`) %>" 
       target="_blank">
      <i class="fa fa-linkedin"></i>
    </a>
  </li>

  <!-- Instagram (Note: Instagram doesnâ€™t support direct web share links) -->
  <li>
    <a onclick="shareOnInstagram()" href="https://www.instagram.com/" target="_blank">
      <i class="fa fa-instagram"></i>
    </a>
  </li>
</ul>

  <button onclick="shareContent()" class="buttoning"> <i class="fas fa-share"></i> share </button>
        <div id="blogData" data-category="<%= blog.category %>" data-topic="<%= blog.headline %>"></div>

                           
                           
                      </div> <!-- cont -->
                  </div> 
                  <!-- blog details -->
              </div>
               <div class="col-lg-4">
                   <div class="saidbar">
                       <div class="row">
                           <div class="col-lg-12 col-md-6">
                               <div class="saidbar-search mt-30">
                                   <form action="#">
                                       <input type="text" placeholder="Search">
                                       <button type="button"><i class="fa fa-search"></i></button>
                                   </form>
                               </div> <!-- saidbar search -->
                               <div class="categories mt-30">
                                   <h4>Categories</h4>
                                   <ul>
                                    <% if (blogs && blogs.length) { %>
                                        <% let categories = new Set(); // Store unique categories %>   
                                        <% blogs.forEach(blog => { %>
                                            <% if (!categories.has(blog.category)) { %>
                                            <% categories.add(blog.category); %>
                                            <li>
                                                <a href="/blog-category/<%= blog.category %>">
                                                <%= blog.category %>
                                                </a>
                                            </li>
                                            <% } %>
                                        <% }) %>
                                        <% } %>

                                   </ul>
                               </div>
                           </div> <!-- categories -->
                           <div class="col-lg-12 col-md-6">
                               <div class="saidbar-post mt-30">
                                   <h4>Popular Posts</h4>
                                   <ul>
                                    <% if(blogFew && blogFew.length) {%>
                                    <% blogFew.forEach( blo => { %>
                                       <li>
                                            <a href="/single-blog/<%= blo._id %>/<%= blo.slug %>">
                                                <div class="singel-post">
                                                   <div class="thum">
                                                       <img src="<%= blo.img ? blo.img.url : 'images/blog/blog-post/bp-1.jpg' %>" alt="Blog">
                                                   </div>
                                                   <div class="cont">
                                                       <h6><%= blo.headline.split(" ").slice(0, 4).join(" ") %></h6>

                                                        <% const dating = blo.createdAt %>
                                                        <% const date = new Date(dating)  %>
                                                        <% const options = { day: 'numeric', month: 'long', year: 'numeric' }; %>
                                                       <span><%= date.toLocaleDateString('en-US', options) %></span>
                                                   </div>
                                               </div> <!-- singel post -->
                                            </a>
                                       </li>
                                    <% }) %>
                                    <% } %>
                                   </ul>
                               </div> <!-- saidbar post -->
                              
                           </div>
                       </div> <!-- row -->
                   </div> <!-- saidbar -->
               </div>
           </div> <!-- row -->
        </div> <!-- container -->
    </section>
    
    <!--====== BLOG PART ENDS ======-->
   
    <%- include ("../website/include/footer.ejs") %> 
    <style>

    .pagination {
        margin-top: 15px;
    }

    .pagination a, .pagination span {
        display: inline-block;
        padding: 6px 12px;
        margin: 2px;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-decoration: none;
        color: #333;
    }

    .buttoning{
        outline: none;
        border: none;
        border-radius: 10px;
        background: #007bff;
        color: white;
        margin: 20px;
        padding: 10px;
    }

    .pagination span.active {
        background: #007bff;
        color: #fff;
        border-color: #007bff;
    }
    
    .pagination a:hover {
        background: #f0f0f0;
    }
</style>

<script>
      async function shareContent() {
  const blogDataElement = document.getElementById('blogData');
  const category = blogDataElement.getAttribute('data-category');
  const topic = blogDataElement.getAttribute('data-topic');

  const content = {
    title: category,
    text: topic,
    url: window.location.href,
  };

  try {
    if (navigator.share) {
      await navigator.share(content);
    } else {
      alert('Web Share API not supported on this browser.');
    }
  } catch (error) {
    console.error('Error sharing content:', error);
  }
}




function shareOnTwitter() {
      const newsTitle = '<%=blog.topic%>';
      const newsUrl = window.location.href;
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(newsTitle)}&url=${encodeURIComponent(newsUrl)}`;
      window.open(twitterUrl, '_blank');
    }

    function shareOnFacebook() {
      const newsTitle = '<%=blog.topic%>';
      const newsUrl = window.location.href;
      const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(newsUrl)}`;
      window.open(facebookUrl, '_blank');
    }

    function shareOnLinkedIn() {
      const newsTitle = '<%=blog.topic%>';
      const newsUrl = window.location.href;
    const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(newsUrl)}`;
    window.open(linkedInUrl, '_blank');
  }


  function shareOnInstagram() {
    // Provide instructions to users to share content manually on Instagram.
    alert('To share on Instagram, open the Instagram app and upload your content. or USE SECOND SHARE BUTTON');
  }
</script>