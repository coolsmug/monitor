
<%- include ("../website/include/header.ejs") %> 
    <!--====== PAGE BANNER PART START ======-->
  
    <section id="page-banner" class="pt-105 pb-130 bg_cover" data-overlay="8" style="background-image: url('<%= image && image.url ? image.url : "images/page-banner-2.jpg" %>')">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="page-banner-cont">
                        <h2>Blog</h2>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Blogs</li>
                            </ol>
                        </nav>
                    </div>  <!-- page banner cont -->
                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </section>

    <!--====== PAGE BANNER PART ENDS ======-->
   
    <!--====== BLOG PART START ======-->
    
    <section id="blog-page" class="pt-90 pb-120 gray-bg">
        <div class="container">
           <div class="row">
               <div class="col-lg-8">
                    <% if(blog && blog.length) {%>
                    <% for(var i = 0; i < blog.length; i++) {%>
                   <div class="singel-blog mt-30">
                       <div class="blog-thum">
                           <img src="<%= blog[i].img ? blog[i].img.url : "images/blog/b-1.jpg" %>" alt="Blog">
                       </div>
                       <div class="blog-cont">
                           <a href="/single-blog/<%= blog[i]._id %>/<%= blog[i].slug %>"><h3><%= blog[i].headline %></h3></a>
                           <ul>
                                                        <% const dating = blog[i].createdAt %>
                                                        <% const date = new Date(dating)  %>
                                                        <% const options = { day: 'numeric', month: 'long', year: 'numeric' }; %>
                               <li><a href="#"><i class="fa fa-calendar"></i><%= date.toLocaleDateString('en-US', options) %></a></li>
                               <li><a href="#"><i class="fa fa-user"></i><%= blog[i].author %></a></li>
                               <li><a href="#"><i class="fa fa-tags"></i><%= blog[i].category %></a></li>
                           </ul>
                            <% if (blog[i] && blog[i].content) { %>
                                <% var blogger = blog[i].content.split(' ').slice(0, 50).join(' ') %>
                            <% blogger.split(/\r?\n/).forEach(p => { %>
                                <% if (p.trim()) { %>
                                <p><%= p %>...</p>
                                <% } %>
                            <% }) %>
                            <% } %>
                       </div>
                   </div> <!-- singel blog -->
                <% } %> 
                <% } 
                else { %>
                    <p>No blogs available in this category.</p>
                <% } %>
               
                   <nav class="courses-pagination mt-50">
                        <ul class="pagination justify-content-lg-end justify-content-center">
                            <% if (currentPage > 1) { %>
                            <li class="page-item">
                                <a href="/blogs?page=<%= currentPage - 1 %>" aria-label="Previous">
                                <i class="fa fa-angle-left"></i>
                                </a>
                            </li>
                            <% } %>

                            <% for (let i = 1; i <= totalPages; i++) { %>
                            <li class="page-item">
                                <a class="<%= i === currentPage ? 'active' : '' %>" href="/blogs?page=<%= i %>">
                                <%= i %>
                                </a>
                            </li>
                            <% } %>

                            <% if (currentPage < totalPages) { %>
                            <li class="page-item">
                                <a href="/blogs?page=<%= currentPage + 1 %>" aria-label="Next">
                                <i class="fa fa-angle-right"></i>
                                </a>
                            </li>
                            <% } %>
                        </ul>
                    </nav> <!-- courses pagination -->
               </div>
               <div class="col-lg-4">
                   <div class="saidbar">
                       <div class="row">
                           <div class="col-lg-12 col-md-6">
                               <div class="saidbar-search mt-30">
                                   <form action="#">
                                       <input type="text" placeholder="Search">
                                       <button type="button"><i class="fa fa-search"></i></button>
                                   </form>
                               </div> <!-- saidbar search -->
                               <div class="categories mt-30">
                                   <h4>Categories</h4>
                                  
                                   <ul>
                                     <% if (blogs && blogs.length) { %>
                                    <% let categories = new Set(); // Store unique categories %>   
                                    <% blogs.forEach(blog => { %>
                                        <% if (!categories.has(blog.category)) { %>
                                        <% categories.add(blog.category); %>
                                        <li>
                                            <a href="/blog-category/<%= blog.category %>">
                                            <%= blog.category %>
                                            </a>
                                        </li>
                                        <% } %>
                                    <% }) %>
                                    <% } %>

                                   </ul>
                                  
                               </div>
                           </div> <!-- categories -->
                           <div class="col-lg-12 col-md-6">
                               <div class="saidbar-post mt-30">
                                   <h4>Popular Posts</h4>
                                   <ul>
                                            <% if(blogFew && blogFew.length) {%>
                                            <% blogFew.forEach( blo => { %>
                                        <li>
                                              <a href="/single-blog/<%= blo._id %>/<%= blo.slug %>">
                                                    <div class="singel-post">
                                                    <div class="thum">
                                                         <img src="<%= blo.img ? blo.img.url : 'images/blog/blog-post/bp-1.jpg' %>" alt="Blog">
                                                    </div>
                                                    <div class="cont">
                                                         <h6><%= blo.headline.split(" ").slice(0, 4).join(" ") %></h6>
                                                         <% const dating = blo.createdAt %>
                                                         <% const date = new Date(dating)  %>
                                                         <% const options = { day: 'numeric', month: 'long', year: 'numeric' }; %>
                                                         <span><%= date.toLocaleDateString('en-US', options) %></span>
                                                    </div>
                                                  </div> <!-- singel post -->
                                              </a>
                    
                                       </li>
                                            <% }) %>
                                            <% } %>
                                   </ul>
                               </div> <!-- saidbar post -->
                           </div>
                       </div> <!-- row -->
                   </div> <!-- saidbar -->
               </div>
           </div> <!-- row -->
        </div> <!-- container -->
    </section>
  
    <!--====== BLOG PART ENDS ======-->
    <%- include ("../website/include/footer.ejs") %> 