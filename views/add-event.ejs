<%- include ("./include/header.ejs") %> 

<%- include ("./include/_dash_board.ejs") %> 

<div class="diverr">
    <h4><i class="fas fa-house-user"></i>Add Event</h4>

    <div class="form_for_create">
        
        <%- include ('./partials/messages') %>
        
        <h2>Create a New Event</h2>
    <form id="eventForm" enctype="multipart/form-data" method="POST" action="/admin/create-event">
        <label for="event_name">Event Name</label>
        <input type="text" class="input" id="event_name" name="event_name" required>

        <label for="venue">Venue</label>
        <input type="text" class="input" id="venue" name="venue" required>

        <label for="date">Date</label>
        <input type="datetime-local" class="input" id="date" name="dates" required>

        <label for="content">Content</label>
        <textarea id="content" name="content" rows="4" required></textarea>


        <label for="img">Cover Image</label>
        <input type="file" id="img" class="input" name="img" accept="image/*" required>

        <label for="image">Additional Image</label>
        <input type="file" id="image" class="input" name="image" accept="image/*" required>

        <button type="submit" class="butto">Create Event</button>
    </form>

    <script>
        document.getElementById('eventForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);

    try {
        const response = await fetch('/admin/create-event', {
            method: 'POST',
            body: formData
        });

        if (response.ok) {
            const result = await response.json();
            alert('Event created successfully!');
            console.log(result);
        } else {
            const error = await response.json();
            alert('Error creating event: ' + error.message);
        }
    } catch (error) {
        console.error('Error:', error);
        alert('An error occurred while creating the event.');
    }
});

    </script>
    </div> 
</div>

<footer class="foot">
    <h3>All rights reserved and Powered by Dark theme code <i class="fas fa-copyright"></i> 2024</h3>
</footer>   

<%- include ("./include/footer.ejs") %>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 2rem; }
    #eventForm { max-width: 500px; margin: auto; padding: 2rem; border: 1px solid #ddd; border-radius: 5px; }
    label { display: block; margin-top: 1rem; font-weight: bold; }
    .input, textarea, .butto { width: 100%; padding: 1rem; margin-top: 0.5rem; }
    .butto { background-color: #28a745; color: white; border: none; cursor: pointer; }
    .butto:hover { background-color: #218838; }
</style>